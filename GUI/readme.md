## 📋 개요
이 프로젝트는 PyQt5를 활용하여 개발된 GUI 애플리케이션으로, YOLO를 활용한 객체 탐지, Milvus를 이용한 벡터 유사도 검색 등 다양한 기능을 제공합니다.  

## 🏠 메인 윈도우 클래스 - Aris 아이스크림 판매 키오스크
### 📌 주요 기능

#### 1. **메인 메뉴 및 이미지 설정**
- **메뉴 이미지 설정**  
  - `menu1`, `menu2`, `menu3`에 각각 딸기맛, 바닐라맛, 초코맛 메뉴의 이미지를 표시합니다.
  - 메뉴에 마우스를 올리면 손 모양 커서(`Qt.PointingHandCursor`)로 변경됩니다.

- **메뉴 선택**  
  - 각 메뉴를 클릭하면 새로운 창(`NewWindow`)이 열리고, 해당 메뉴에 대한 토핑 선택을 할 수 있습니다.
  
#### 2. **가장 많이 주문한 메뉴 및 최근 주문 메뉴 표시**
- **가장 많이 주문한 메뉴**  
  - 가장 많이 주문한 메뉴(`most_menu`)를 해당 이미지로 표시합니다. 메뉴가 동일한 경우, 공유 이미지를 사용하여 표시합니다.

- **최근 주문 메뉴**  
  - 마지막으로 주문한 메뉴(`last_menu`)를 표시합니다. 가장 많이 주문한 메뉴와 다른 경우 별도의 이미지를 사용하여 표시합니다.

#### 3. **주문 목록 관리**
- **주문 리스트 초기화 및 업데이트**  
  - 주문 목록은 `QStringListModel`을 사용하여 관리됩니다. 새로운 주문이 추가될 때마다 해당 목록을 업데이트합니다.
  
- **주문 삭제**  
  - 주문 목록에서 항목을 삭제할 수 있는 버튼을 제공합니다. 삭제된 항목은 `delete_item_at_index()` 메서드를 통해 처리됩니다.
  
- **영수증 출력**  
  - 주문 목록을 기반으로 영수증을 출력할 수 있는 기능을 제공합니다. `show_receipt()` 메서드를 통해 임시 영수증을 출력합니다.

#### 4. **회원 정보 및 주문 처리**
- **회원 정보 입력**  
  - `update_member_info()` 메서드를 통해 사용자의 이름과 전화번호를 입력받고, 해당 정보를 데이터베이스에 저장합니다.

- **주문 목록 추가**  
  - 사용자가 메뉴를 선택하면 해당 메뉴가 주문 목록에 추가됩니다. `update_order_list()` 메서드를 통해 주문 목록을 업데이트합니다.
  

## 🤖 로봇 연결 클래스 - Robot_Connect
### 📌 주요 기능

#### 1. **소켓 연결**
- **로봇과의 연결**  
  - `socket_connect()` 메서드는 로봇과의 연결을 담당합니다. 로봇 서버에 소켓을 통해 연결하고, 연결이 성공하면 메시지를 지속적으로 수신 대기합니다.
  - 연결 실패 시 5초 후 재시도하며, 연결이 끊어지면 자동으로 재연결을 시도합니다.
- **메시지 수신**  
  - 로봇으로부터 수신한 메시지는 `recv_msg`로 받아서 처리합니다. 예를 들어, 아이스크림 서비스 종료(`icecream_service_finish`), 로봇 긴급 정지(`robot_pause`), 또는 로봇 재개(`robot resume`) 등의 메시지를 수신합니다.
  
#### 2. **주문 처리 및 토핑**
- **토핑 설정**  
  - `order_receipt_process()` 메서드는 주문 내역을 기반으로 토핑 정보를 처리하고, 각 토핑에 대한 상태(유무)를 확인하여 `topping_signal`을 생성합니다.
  - 예시: "코코볼", "죠리퐁", "해바라기씨"가 포함된 경우 각각 "1"을 추가하여 토핑 신호를 설정합니다.
- **Jig(지그) 선택**  
  - 주문이 들어오면 사용 가능한 지그(A, B, C) 중 하나를 선택하여 아이스크림을 제작합니다. 사용 후 지그 상태를 업데이트합니다.

#### 3. **아이스크림 추출 명령**
- **아이스크림 추출 명령**  
  - `icecream_order()` 메서드는 아이스크림을 주문하고, 로봇 팔에 명령을 전달합니다.
  - 이 명령은 `data_icecream`이라는 JSON 형태로 로봇에게 전달됩니다. 이 JSON에는 토핑, 지그, 스푼 각도 등의 정보가 포함됩니다.


## 🗃️ 데이터베이스 연결 클래스 - DB_Connect
### 📌 주요 기능

#### 1. **소켓 연결**
- **DB 서버와 연결**  
  - `socket_connect()` 메서드는 DB 서버와의 연결을 담당합니다. DB 서버(예: `192.168.0.28:65432`)에 소켓을 통해 연결하며, 연결이 성공하면 메시지를 지속적으로 수신 대기합니다.
  - 연결 실패 시 2초 후 재시도하고, 연결이 끊어지면 자동으로 재연결을 시도합니다.
- **메시지 수신**  
  - DB에서 수신한 메시지는 `recv_msg`로 받아서 처리합니다. 예를 들어, 새로 가입된 회원 정보(`new_member_added`), 기존에 등록된 회원 정보(`already_registered`), 회원 정보 요청(`member_info`) 등을 처리합니다.
  
#### 2. **회원 정보 처리**
- **새로운 회원 가입 처리**  
  - `db_new_member()` 메서드는 새로운 회원이 가입을 시도할 때, 회원 정보를 DB에 전송하고 결과를 처리합니다. 만약 회원이 이미 등록된 경우, 이를 반환합니다.
- **회원 정보 조회**  
  - `get_member_info()` 메서드는 특정 회원의 이름과 전화번호를 바탕으로 DB에서 회원 정보를 조회합니다.

#### 3. **주문 처리 및 업데이트**
- **주문 업데이트**  
  - `db_update_order()` 메서드는 새로운 주문이 발생할 때 해당 주문 정보를 DB로 전송합니다. 주문 정보에는 맛(flavor)과 토핑(topping) 정보, 그리고 회원 여부가 포함됩니다. 회원일 경우 회원 번호도 함께 전달됩니다.
- **주문 정보 파싱**  
  - 주문 정보는 `kor_flavor_list`(국내 맛 리스트)와 `eng_flavor_list`(영문 맛 리스트)를 비교하여, 맛을 적절히 변환합니다. 또한, 토핑 정보를 파싱하여 토핑 신호를 생성합니다.

#### 4. **메시지 전송 및 처리**
- **DB와의 데이터 통신**  
  - 데이터는 소켓을 통해 DB 서버로 전송되며, 전송하는 데이터는 주로 `new_order`, `member_info`, `sign_up` 등의 명령어와 함께 현재 시간(`datetime_now`)을 포함한 데이터로 구성됩니다.
  
### 💬 주요 메시지 유형
- **회원 정보 관련**
  - `new_member_added`: 새로운 회원 가입 완료
  - `already_registered`: 기존에 등록된 회원 정보
  - `member_info`: 회원 정보 요청에 대한 응답
- **주문 관련**
  - `order_updated`: 주문 업데이트 완료
  

## ⚙️ 관리자 페이지 기능
### 📌 주요 기능

### ManagerDialog 클래스 - 관리자 페이지의 핵심 기능
`ManagerDialog` 클래스는 관리자 페이지의 핵심 기능을 담당하며, 다음과 같은 작업을 수행합니다:

## 1. 탭 구성
- **상품 관리** 및 **연결 상태 확인** 기능을 `QTabWidget`으로 구분.
- 각 탭의 크기와 스타일을 사용자 정의하여 가독성과 편의성 향상.

## 2. 상품 및 토핑 상태 관리
- **상품 품절 처리:**
  - `menu_sold_btn_*`: 특정 상품을 품절 상태로 전환.
  - `menu_sell_btn_*`: 품절 상태를 해제하고 정상 판매로 복구.
- **토핑 품절 처리:**
  - `top_sold_btn_*`: 특정 토핑을 품절 상태로 설정.
  - `top_sell_btn_*`: 품절 상태를 해제하여 정상 판매로 전환.
- 부모 창과의 데이터 연동으로 상품 및 토핑 상태를 실시간 업데이트.

## 3. 연결 상태 확인
- **로봇 연결 상태 (`robot_connection_status`):**
  - 로봇 연결 여부를 확인하여 버튼 색상으로 표시:
    - 초록색: 연결 완료.
    - 빨간색: 연결 실패.
- **데이터베이스 연결 상태 (`DB_connection_status`):**
  - 데이터베이스 연결 여부에 따라 버튼 색상을 변경:
    - 초록색: 연결 완료.
    - 빨간색: 연결 실패.

     
### ManagerpwDialog 클래스 - 관리자 비밀번호 입력 및 확인 기능
`ManagerpwDialog` 클래스는 **관리자 비밀번호 입력과 관련된 작업**을 처리하며, 다음과 같은 기능을 제공합니다:

## 1. 비밀번호 입력 및 확인
- **숫자 키패드 버튼**(`pushButton_0 ~ pushButton_9`)을 사용하여 비밀번호 입력.
- **`delete` 버튼**을 눌러 입력한 비밀번호를 하나씩 삭제 가능.
- **비밀번호 확인 버튼**(`confirm_btn`)을 통해 입력된 비밀번호가 맞는 경우, 관리자 페이지로 이동.

## 2. GUI 구성
- 비밀번호 입력 시, 입력된 길이에 따라 `*` 표시로 가려져 화면에 표시.
- 잘못된 비밀번호를 입력하면 **경고 메시지**(`QMessageBox.warning`)가 팝업으로 출력.

## 3. 관리자 페이지 연동
- 입력된 비밀번호가 사전에 설정된 비밀번호와 일치하는 경우, `ManagerDialog`를 열어 관리자 기능에 접근.


## 👥 회원가입 기능
### 📌 주요 기능

### MemberConfirmDialog 클래스 - 얼굴 인식을 통한 회원 확인 및 처리
`MemberConfirmDialog` 클래스는 **얼굴 인식을 통한 회원 확인**과 **회원/비회원 처리**를 담당하며, 다음과 같은 주요 기능을 제공합니다:

## 1. 회원 여부 확인
- **얼굴 인식**을 통해 데이터베이스에서 회원 정보를 검색.
- 기존 회원이라면 환영 메시지와 함께 회원 정보를 메인 화면에 전달.

## 2. 비회원 처리
- 회원 가입 여부를 묻는 팝업 메시지 출력.
  - **'회원 가입' 선택:** 회원 정보를 등록하는 새로운 다이얼로그로 이동.
  - **'비회원으로 진행' 선택:** 기본 추천 메뉴를 제공하고 메인 화면으로 이동.

## 3. 실시간 카메라 화면 업데이트 및 이벤트 처리
- 카메라에서 **실시간 화면**을 업데이트하여 사용자 인터페이스에 표시.
- **얼굴 인식 완료 후 이벤트 처리:**
  - 회원 정보 확인 후 메인 화면으로 진행.
  - 인식된 정보가 없을 경우, 회원 가입 여부를 묻는 메시지를 표시.

### MemberInfoDialog 클래스 - 회원 등록 및 정보 처리
`MemberInfoDialog` 클래스는 **회원 등록** 및 **회원 정보 처리를 담당**하며, 다음과 같은 주요 기능을 제공합니다:

## 1. 회원 등록 절차
- **이름 및 전화번호 입력**:  
  사용자가 이름과 전화번호를 입력한 후, 등록 버튼(`mb_regist_btn`)을 클릭합니다.
  
- **얼굴 인식 요청**:  
  등록 절차 시작 시, 사용자에게 카메라를 응시하며 얼굴을 좌우로 움직이도록 안내합니다.
  
- **데이터 전송**:  
  입력된 이름과 전화번호를 기반으로 얼굴 인식 프로세스(`cam_kiosk.cam_manager`)를 실행합니다.

## 2. 실시간 카메라 화면 업데이트
- **카메라 화면 표시**:  
  얼굴 인식 중 카메라 화면을 실시간으로 업데이트하여 사용자에게 현재 상태를 보여줍니다.
  
- **등록 완료 처리**:  
  얼굴 인식이 완료되면, 부모 창(`my_window`)에 회원 정보를 전송하고 메뉴 화면을 업데이트합니다.


## 🍕 토핑 선택 기능
### 📌 주요 기능

#### 1. **토핑 이미지 및 텍스트 설정**
`NewWindow` 클래스는 사용자가 선택할 수 있는 다양한 토핑 이미지를 표시하고, 각 토핑에 대한 이름을 설정합니다:
- **토핑 이미지 표시**  
  - `Topping_1`, `Topping_2`, `Topping_3` 등의 라벨에 각각의 토핑 이미지를 표시합니다.
  - 품절된 토핑에 대해서는 품절 이미지를 보여주고, 해당 토핑을 선택할 수 없도록 처리합니다.

- **토핑 이름 표시**  
  각 토핑에 대한 설명 텍스트를 설정합니다. 예를 들어, "코코볼", "죠리퐁", "해바라기씨" 등으로 이름을 표시합니다.

#### 2. **토핑 선택 및 취소**
- **토핑 선택**  
  - 사용자가 토핑을 클릭할 때, 해당 토핑을 선택하거나 해제할 수 있습니다. 선택된 토핑은 빨간 테두리로 표시되며, 선택된 토핑은 `selected_toppings` 리스트에 저장됩니다.
  - **"없음" 옵션 선택**  
    - 사용자가 "없음" 옵션을 선택하면, 다른 토핑을 모두 해제하고 "없음"만 선택된 상태로 표시됩니다.

- **취소 및 담기 버튼**  
  - **취소 버튼**: 현재 창을 닫습니다.
  - **담기 버튼**: 선택된 토핑 정보를 주문 목록에 추가하고 창을 닫습니다.

#### 3. **품절 상태 처리**
`set_topping_sold_out()` 메서드는 다른 창에서 전달된 품절 상태를 반영하여 토핑 이미지 및 선택 상태를 업데이트합니다:
- 품절된 토핑은 `soldout_path` 이미지를 표시하고 선택할 수 없도록 합니다.

#### 4. **주문에 토핑 추가**
- 사용자가 선택한 토핑은 `add_to_order()` 메서드를 통해 주문 목록에 추가됩니다.
  - 선택된 토핑은 문자열로 변환하여, 메인 주문 목록에 추가합니다.
  - **"없음"** 옵션은 선택된 토핑에서 제외됩니다.

#### 5. **카메라 화면 업데이트**
- `set_image()` 메서드를 사용하여, 선택된 메뉴의 이미지를 화면에 업데이트합니다.




